{"ast":null,"code":"var _jsxFileName = \"/Users/pluemjir/Documents/CODECAMP ONLINE/Project/urlique-project/src/component/BookingCard/BookingCardAntd2.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, List } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport localStorageService from '../../services/localStorageService';\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BookingCardAntd2 = props => {\n  _s();\n\n  let username = '';\n\n  const getUsername = async () => {\n    const token = await localStorageService.getToken();\n\n    if (token) {\n      const user = jwtDecode(token);\n      username = user.name;\n    }\n  };\n\n  const [Booking, setBooking] = useState([]);\n\n  const fetchReservation = async () => {\n    const myBooking = [];\n    const date = new Date();\n    let formatted_date = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds();\n    let n = 0;\n    const httpResponse = await axios.get('http://localhost:5000/reservation');\n    const result = await axios.get(`http://localhost:5000/users/${username}`);\n    httpResponse.data.map(x => {\n      if (x.toId === result.data.id && x.option === 'WAITING') {\n        myBooking.push(x);\n        n += 1;\n      }\n    });\n    setBooking(myBooking);\n  };\n\n  const checkTimeOut = async () => {\n    const date = new Date();\n    let formatted_date = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds();\n    const httpResponse = await axios.get('http://localhost:5000/reservation');\n    const result = await axios.get(`http://localhost:5000/users/${username}`);\n    httpResponse.data.map(x => {\n      if (x.toId === result.data.id && x.option === 'WAITING') {\n        let createdAt = Date.parse(x.createdAt.slice(0, 10) + ' ' + x.createdAt.slice(11, 19));\n        let dateNow = Date.parse(formatted_date.slice(0, 24)); // console.log((x.createdAt.slice(0,10)) + ' ' + (x.createdAt.slice(11,19)))\n        // console.log(x.id)\n        // console.log(dateNow-createdAt)\n\n        if (dateNow - createdAt > 28800000) {\n          // console.log(x)\n          axios.delete(`/reservation/${x.id}`);\n        }\n      }\n    });\n  };\n\n  const getAlldata = async () => {\n    await getUsername();\n    await checkTimeOut();\n    await fetchReservation();\n  };\n\n  const declineBooking = async id => {\n    await axios.delete(`/reservation/${id}`);\n    await fetchReservation();\n  };\n\n  const acceptBooking = async id => {\n    const newStatus = 'ACCEPTED';\n    await axios.put(`/reservation/${id}`, {\n      option: newStatus\n    });\n    await fetchReservation();\n  };\n\n  useEffect(() => {\n    getAlldata();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(List, {\n    itemLayout: \"vertical\",\n    size: \"large\",\n    style: {\n      width: '100%'\n    },\n    dataSource: Booking,\n    renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n      style: {\n        height: '240px',\n        borderRadius: '5px',\n        backgroundColor: 'white',\n        marginBottom: '20px',\n        width: '100%'\n      },\n      extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '10px',\n          height: '100%',\n          backgroundColor: 'tomato',\n          width: '130px',\n          borderBottom: '15px solid black'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'white',\n            fontWeight: 'Bold'\n          },\n          children: [\"REV. ID : \", item.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'white',\n            fontWeight: 'Bold'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.option\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'white'\n          },\n          children: [\"STANDEE ID : #\", item.toId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"!! Always check your STANDEE ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n        style: {\n          height: '80%',\n          backgroundColor: 'tomato',\n          padding: '20px 20px'\n        },\n        title: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'white'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 'bold',\n              color: 'white',\n              fontSize: '3rem'\n            },\n            children: item.restaurant\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 32\n        }, this),\n        description: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'white',\n              fontSize: '2rem',\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'white'\n              },\n              children: [\" \", /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 60\n              }, this), \" \", item.number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 43\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'white',\n              fontSize: '1rem'\n            },\n            children: [\"NOTE : \", item.description]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [\"Booking Date : \", item.createdAt.slice(0, 10) + ' ' + item.createdAt.slice(11, 19), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            style: {\n              marginRight: '10px'\n            },\n            onClick: () => acceptBooking(item.id),\n            children: \"ACCEPT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"danger\",\n            onClick: () => declineBooking(item.id),\n            children: \"DECLINE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)]\n    }, item.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BookingCardAntd2, \"OqyYIJXRS1GngH325Vrch9H9/Xo=\");\n\n_c = BookingCardAntd2;\nexport default BookingCardAntd2;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookingCardAntd2\");","map":{"version":3,"sources":["/Users/pluemjir/Documents/CODECAMP ONLINE/Project/urlique-project/src/component/BookingCard/BookingCardAntd2.js"],"names":["React","useEffect","useState","Button","List","UserOutlined","axios","localStorageService","jwtDecode","BookingCardAntd2","props","username","getUsername","token","getToken","user","name","Booking","setBooking","fetchReservation","myBooking","date","Date","formatted_date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","n","httpResponse","get","result","data","map","x","toId","id","option","push","checkTimeOut","createdAt","parse","slice","dateNow","delete","getAlldata","declineBooking","acceptBooking","newStatus","put","width","item","height","borderRadius","backgroundColor","marginBottom","padding","borderBottom","color","fontWeight","fontSize","restaurant","display","justifyContent","number","description","marginRight"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { Button, List } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport axios from 'axios'\nimport localStorageService from '../../services/localStorageService'\nimport jwtDecode from 'jwt-decode'\n\n\n\nconst BookingCardAntd2 = (props) => {\n\n    let username = ''\n    const getUsername = async () => {\n        const token = await localStorageService.getToken();\n        if (token) {\n            const user = jwtDecode(token)\n            username = user.name\n        }\n    }\n    const [Booking, setBooking] = useState([])\n    const fetchReservation = async () => {\n        const myBooking = []\n        const date = new Date()\n        let formatted_date = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds() \n        let n = 0\n        const httpResponse = await axios.get('http://localhost:5000/reservation')\n        const result = await axios.get(`http://localhost:5000/users/${username}`)\n        httpResponse.data.map( x => {\n            if (x.toId === result.data.id && x.option === 'WAITING'){\n                myBooking.push(x)\n                n +=1\n            }\n        })\n        setBooking(myBooking)\n    }\n\n    const checkTimeOut = async () => {\n        const date = new Date()\n        let formatted_date = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds() \n        const httpResponse = await axios.get('http://localhost:5000/reservation')\n        const result = await axios.get(`http://localhost:5000/users/${username}`)\n        httpResponse.data.map( x => {\n            if (x.toId === result.data.id && x.option === 'WAITING'){\n                let createdAt = Date.parse((x.createdAt.slice(0,10)) + ' ' + (x.createdAt.slice(11,19)))\n                let dateNow = Date.parse((formatted_date).slice(0,24))\n                // console.log((x.createdAt.slice(0,10)) + ' ' + (x.createdAt.slice(11,19)))\n                // console.log(x.id)\n                // console.log(dateNow-createdAt)\n                if (dateNow-createdAt > 28800000) {\n                    // console.log(x)\n                    axios.delete(`/reservation/${x.id}`);\n                } \n            } \n        })\n    }\n\n    const getAlldata = async () => {\n        await getUsername()\n        await checkTimeOut()\n        await fetchReservation()\n    }\n\n    const declineBooking = async (id) => {\n        await axios.delete(`/reservation/${id}`);\n        await fetchReservation()\n    }\n\n    const acceptBooking = async (id) => {\n        const newStatus = 'ACCEPTED'\n        await axios.put(`/reservation/${id}`, {option : newStatus})\n        await fetchReservation()\n    }\n\n    useEffect(() => {\n        getAlldata()\n    },[])\n    return (\n        <List\n            itemLayout=\"vertical\"\n            size=\"large\"\n            style={{width:'100%'}}\n            dataSource={Booking}\n            renderItem={item => (\n                <List.Item\n                    key={item.id}\n                    style={{height:'240px', borderRadius:'5px', backgroundColor:'white', marginBottom:'20px', width:'100%'}}\n                    extra={\n                        <div style={{padding:'10px', height:'100%', backgroundColor:'tomato', width:'130px', borderBottom:'15px solid black'}}>\n                            <div style={{color:'white', fontWeight:'Bold'}}>REV. ID : {item.id}</div>\n                            <br></br>\n                            <div style={{color:'white', fontWeight:'Bold'}}>  \n                                <span>{item.option}</span></div>\n                            <hr></hr>\n                            <div style={{color:'white'}}>STANDEE ID : #{item.toId}</div>\n                            <br></br>\n                            <div style={{color:'red'}}>!! Always check your STANDEE ID</div>\n                        </div>\n                    }\n                >\n                    <List.Item.Meta\n                        style={{ height:'80%', backgroundColor:'tomato', padding:'20px 20px'}}\n                        title={<div style={{color:'white'}}><span style={{fontWeight:'bold', color:'white', fontSize:'3rem'}}>{item.restaurant}</span></div>}\n                        description={<div><div style={{color:'white', fontSize:'2rem', display:'flex', justifyContent:'space-between'}}>\n                            <span>{item.date}</span> \n                            <span style={{color:'white'}}> <UserOutlined/> {item.number}</span>\n                            <span></span>\n                            </div>\n                            <div style={{color:'white', fontSize:'1rem'}}>NOTE : {item.description}</div></div>}\n                    />\n                    <div style={{display:'flex', justifyContent:'space-between'}}>\n                        Booking Date : {(item.createdAt.slice(0,10)) + ' ' + (item.createdAt.slice(11,19))}  \n                        <span>\n                            <Button type=\"primary\" style={{marginRight:'10px'}} onClick={() => acceptBooking(item.id)}>ACCEPT</Button>  \n                            <Button type=\"danger\" onClick={() => declineBooking(item.id)} >DECLINE</Button>\n                        </span>\n                    </div>\n                    \n                </List.Item>\n            )}\n        />\n    )\n}\n\nexport default BookingCardAntd2"]},"metadata":{},"sourceType":"module"}