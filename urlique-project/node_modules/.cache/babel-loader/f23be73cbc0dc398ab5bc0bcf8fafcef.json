{"ast":null,"code":"import { notification } from 'antd';\nimport axios from 'axios';\nimport localStorageService from '../services/localStorageService';\naxios.defaults.baseURL = \"http://localhost:5000\";\naxios.interceptors.request.use(config => {\n  if (config.url.includes('/login') || config.url.includes('/register')) return config;\n  const token = localStorageService.getToken();\n\n  if (token) {\n    config.headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  return config;\n}, err => {\n  Promise.reject(err);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, err => {\n  var _err$response;\n\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n    localStorageService.removeToken();\n    window.location.reload();\n    notification.error({\n      message: 'โปรดเข้าสู่ระบบอีกตรั้ง'\n    });\n    return Promise;\n  }\n});\nexport default axios;","map":{"version":3,"sources":["/Users/pluemjir/Documents/CODECAMP ONLINE/Project/urlique-project/src/config/axios.js"],"names":["notification","axios","localStorageService","defaults","baseURL","interceptors","request","use","config","url","includes","token","getToken","headers","err","Promise","reject","response","status","removeToken","window","location","reload","error","message"],"mappings":"AAAA,SAASA,YAAT,QAA6B,MAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAEAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACIC,MAAM,IAAI;AACN,MAAIA,MAAM,CAACC,GAAP,CAAWC,QAAX,CAAoB,QAApB,KAAiCF,MAAM,CAACC,GAAP,CAAWC,QAAX,CAAoB,WAApB,CAArC,EAAuE,OAAOF,MAAP;AAEvE,QAAMG,KAAK,GAAGT,mBAAmB,CAACU,QAApB,EAAd;;AAEA,MAAID,KAAJ,EAAW;AACPH,IAAAA,MAAM,CAACK,OAAP,CAAe,eAAf,IAAmC,UAASF,KAAM,EAAlD;AACH;;AAED,SAAOH,MAAP;AACH,CAXL,EAYIM,GAAG,IAAI;AACHC,EAAAA,OAAO,CAACC,MAAR,CAAeF,GAAf;AACH,CAdL;AAiBAb,KAAK,CAACI,YAAN,CAAmBY,QAAnB,CAA4BV,GAA5B,CACIU,QAAQ,IAAI;AACR,SAAOA,QAAP;AACH,CAHL,EAIIH,GAAG,IAAI;AAAA;;AACH,MAAI,kBAAAA,GAAG,CAACG,QAAJ,gEAAcC,MAAd,MAAyB,GAA7B,EAAiC;AAC7BhB,IAAAA,mBAAmB,CAACiB,WAApB;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACAtB,IAAAA,YAAY,CAACuB,KAAb,CAAmB;AACfC,MAAAA,OAAO,EAAE;AADM,KAAnB;AAGA,WAAOT,OAAP;AACH;AACJ,CAbL;AAgBA,eAAed,KAAf","sourcesContent":["import { notification } from 'antd';\nimport axios from 'axios';\nimport localStorageService from '../services/localStorageService'\n\naxios.defaults.baseURL = \"http://localhost:5000\";\n\naxios.interceptors.request.use(\n    config => {\n        if (config.url.includes('/login') || config.url.includes('/register')) return config;\n        \n        const token = localStorageService.getToken()\n\n        if (token) {\n            config.headers[\"Authorization\"] = `Bearer ${token}`\n        }\n\n        return config\n    },\n    err => {\n        Promise.reject(err)\n    }\n)\n\naxios.interceptors.response.use(\n    response => {\n        return response\n    },\n    err => {\n        if (err.response?.status === 401){\n            localStorageService.removeToken();\n            window.location.reload();\n            notification.error({\n                message: 'โปรดเข้าสู่ระบบอีกตรั้ง'\n            })\n            return Promise\n        }\n    }\n)\n\nexport default axios;"]},"metadata":{},"sourceType":"module"}